---
layout: default 
title: Tópico 5.3
---

[← Voltar para Segurança e Permissão de Arquivos](/linux-essentials/01-book-lpi/Topico-05-Seguranca-e-Permissao-de-Arquivos/){: .btn .btn-back }

---

### Listagem de arquivos e diretórios

```
drwxrwxr-x 2 carol carol 4096 Dec 10 15:57 Another_Directory
```

- A primeira coluna da lista mostra o tipo de arquivo e as permissões.
- A segunda coluna indica o número de links físicos apontando para aquele arquivo.
- A terceira e quarta colunas mostram as informações de propriedade: usuário e grupo.
- A quinta coluna mostra o tamanho do arquivo em bytes.
- A sexta coluna mostra a data e a hora exatas da última modificação.
- A sétima e última coluna mostra o nome do arquivo.

Os diretórios `.` e `..` são especiais. `.` é um ponteiro para o diretório atual, enquanto `..` é um ponteiro para o diretório pai (o diretório que contém o diretório atual).

- `-` → Arquivo normal
- `d` → Diretório
- `l` → Link simbólico
- `b` → Dispositivo de bloco
- `c` → Dispositivo de caracteres
- `s` → Socket

---

### Entendendo as permissões

- `r` → Leitura, octal = 4
- `w` → Escrita, octal = 2
- `x` → Execução, octal = 1

Quando alguém tenta acessar o arquivo, o sistema primeiro verifica se essa pessoa é o dono; se for, só as permissões do dono valem.  
Se não for o dono, o sistema verifica se ela pertence ao grupo do arquivo; se sim, usa as permissões do grupo.  
Se não for nem dono nem do grupo, o sistema usa as permissões para os outros usuários.  
Ou seja, as permissões do dono têm prioridade, mesmo que as do grupo ou de outros sejam mais liberais.

---

### Modificando permissões

O comando **chmod** é usado para modificar as permissões de um arquivo e emprega pelo menos dois parâmetros: o primeiro descreve quais permissões devem ser alteradas e o segundo aponta para o arquivo ou diretório em que a alteração será feita.

```sh
chmod ug+rw-x,o-rwx text.txt
```

As permissões para alterações podem ser descritas de duas maneiras:

#### Modo simbólico

- O 1º caractere indica as permissões a serem alteradas: usuário (u), grupo (g), outros (o) ou todos (a).
- Em seguida, é preciso indicar o comando: `+` concede permissão, `-` revoga a permissão e `=` configura com um valor específico.
- Por fim, é necessário especificar a permissão a ser afetada: r, w ou x.

> **Nota:** Quando executado em um diretório, chmod modifica apenas as permissões do diretório.  
> Se quisermos que as alterações valham para todos os arquivos e subdiretórios, devemos utilizar o `-R`:  
> Exemplo: `chmod -R u+rwx nome_diretorio/`

#### Modo numérico

Nesse modo, usa-se 3 dígitos com notação octal.  
Cada permissão tem um valor e deve seguir a seguinte ordem:

- r = 4
- w = 2
- x = 1
- - = 0 (ou seja, revoga se não houver permissão)

O 1º dígito representa **u** (usuário), seguido de **g** (grupo), e por fim outros (**o**).  
Exemplo: `chmod 660 filename`

---

### Modificando proprietário

Utilizamos o comando **chown**.  
Segue a sintaxe:

```sh
chown username:groupname filename
```

---

### Permissões especiais

#### Sticky Bit

- Valor octal: 1
- Representado pela letra **t**
- Está dentro das permissões de **outros**
- No modo simbólico, substitui o x pelo t
- No modo numérico, usa-se a notação de 4 dígitos (ex: 1775)

#### Set GID (SGID)

- Valor octal: 2
- Representado pela letra **s**
- Está dentro das permissões de **grupo**
- No modo simbólico, substitui o x pelo s
- No modo numérico, usa-se a notação de 4 dígitos (ex: 2775)

#### Set UID (SUID)

- Valor octal: 4
- Representado pela letra **s**
- Está dentro das permissões de **usuário**
- No modo simbólico, substitui o x pelo s
- No modo numérico, usa-se a notação de 4 dígitos (ex: 4775)

O **Set UID (SUID)** é uma permissão especial que, quando aplicada a um arquivo executável, faz com que ele seja executado com as permissões do dono do arquivo, e não do usuário que o executa.  
O **Set GID (SGID)**, quando aplicado a um executável, faz com que ele rode com as permissões do grupo dono; quando aplicado a um diretório, faz com que novos arquivos criados nele herdem o grupo do diretório.  
Já o **sticky bit**, usado em diretórios como `/tmp`, impede que usuários apaguem ou renomeiem arquivos de outros dentro desse diretório, mesmo que tenham permissão de escrita nele.

[Anterior](/linux-essentials/01-book-lpi/Topico-05-Seguranca-e-Permissao-de-Arquivos/5.2-CriandoUsuariosAndGrupos){: .btn .btn-back }
[Próximo](/linux-essentials/01-book-lpi/Topico-05-Seguranca-e-Permissao-de-Arquivos/5.4-DiretoriosAndArquivosEspeciais){: .btn .btn-back }