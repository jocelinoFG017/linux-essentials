---
layout: default 
title: Tópico 5.1
---

Os privilégios e controles de acesso definem os “limites” dentro dos quais cada usuário
pode operar.

###### Identificadores
Os Identificadores de Usuário e Grupos (UIDs/GIDs) são as referências básicas, numeradas, às
contas.

*Todo usuário possui não apenas um UID, mas também um GID primário.*

No Linux, a conta do superusuário é root, que sempre terá o UID 0.

###### Contas de usuário Padrão
Via de regra qualquer usuário que não é o root é considerado usuário regular.

A conta de usuário padrão/regular tem:
* UID's começa em 1000
* Um diretório definido
* Um shell de login definido

###### Contas do sistema
As contas de sistema são tipicamente pré-criadas no momento da instalação do sistema. São
destinadas a recursos, programas e serviços que não serão executados como superusuário.

A conta  do sistema tem:
* UID's são menores que 100 ou entre 500-1000. De 2 a 3 digitos
* Não tem diretório inicial dedicado e se tiver não está em /home
* Nenhum shell de login válido

Em geral, as contas de sistema não devem ter um shell de login válido. O contrário representaria
um problema de segurança na maioria dos casos.

###### Contas de Serviço
As contas de serviço são criadas tipicamente quando instalamos e configuramos serviços.

NOTA: A principal diferença entre contas de sistema e de serviço está no UID/GID.

###### Arquivos de controle de acesso
Localizado no diretório **/etc**, que é onde costumam ser armazenados os arquivos de configuração do sistema. Por padrão,
esse diretório é legível por todos os usuários no sistema, mas modificável apenas por root.

Os principais arquivos relacionados a contas de usuário, atributos e controle de acesso são:

###### /etc/passwd
  * Não armazena nenhuma senha
  * Armazena o UID, GID, shell, diretório inicial e etc.

Cada linha contém diversos campos, sempre delimitados por dois pontos (:)
Sintaxe:
- USERNAME:PASSWORD:UID:GID:GECOS:HOMEDIR:SHELL

**PASSWORD**
Quase sempre é x, indicando que a senha está armazenada no arquivo /etc/shadow.

**GECOS**
Uma lista em formato CSV de informações de usuários, incluindo nome, localização, número de
telefone. Por exemplo: Emma Smith,42 Douglas St,555.555.5555


###### /etc/group
  * Armazena informações sobre todos os grupos de usuário no sistema.

Sintaxe:
- NAME:PASSWORD:GID:MEMBERS

Nota: Password quase sempre é X aqui também.

###### /etc/shadow
É aqui que as senhas dos usuários são armazenadas. Elas são criptografadas por segurança.
Sintaxe:
- USERNAME:PASSWORD:LASTCHANGE:MINAGE:MAXAGE:WARN:INACTIVE:EXPDATE

###### /etc/gshadow
  * Lista de administradores do grupo
  * Lista de usuários que podem ser tornar membros do grupo
  * Hash de senha que permite usuários se tornem membros temporários do grupo
  * Informações mais detalhadas sobre os grupos

Sintaxe:
- USERNAME:PASSWORD:LASTCHANGE:MINAGE:MAXAGE:WARN:INACTIVE:EXPDATE

###### /etc/sudoers
  * Controla quem pode acesar o comando sudo
* /etc/sudoers.d
  * arquivos suplementares de configuração do sudoers
* /etc/passwd
------------
NOTA: o método básico de armazenamento de senha é a função de hash unidirecional (one-way).

!! -> Indica uma conta desativada
!$1$01234567$ABC… -> Indica uma conta desativa com salt/sal de hash anterior
$1$01234567$ABC…  -> 

Nota: "!" indica uma conta desativada
Nota2: "$" Indica um salt/sal de hash

Do ponto de vista dos objetivos e do exame LPI Linux Essentials, basta entender que o hash da
senha de um usuário local é armazenado no arquivo /etc/shadow, que apenas serviços
selecionados de autenticação podem ler e o superusuário pode modificar através de outros
comandos.